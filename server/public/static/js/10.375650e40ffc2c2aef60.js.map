{"version":3,"sources":["webpack:///src/views/article/insert.vue","webpack:///./src/views/article/insert.vue?11bb","webpack:///./src/views/article/insert.vue"],"names":["insert","props","edit","type","Boolean","default","editArr","Object","editId","String","data","_ref","_ref2","_this","this","validatetag","asyncToGenerator_default","regenerator_default","a","mark","_callee","rule","value","callback","wrap","_context","prev","next","length","Error","stop","_x","_x2","_x3","apply","arguments","baseapi","category","label","tags","origin","Form","title","keywords","des","tag","content","status","open","imageUrl","rules","required","message","trigger","validator","_callee2","_context2","_x4","_x5","_x6","dialogImageUrl","dialogVisible","content_img_arr","methods","getTagList","_this2","article","getTaglist","then","res","code","tagList","refresh","window","onbeforeunload","imgAdd","pos","file","_this3","formdata","FormData","append","axios_default","url","method","headers","Content-Type","obj","name","push","$refs","md","$img2Url","imgDel","_this4","delurl","map","item","k","delcontentimg","$notify","handleThumbSuccess","beforeThumbUpload","isLt10M","size","$message","error","editArticle","_this5","dataForm1","validate","valid","editOneArticle","$emit","submit","_this6","stringify_default","$router","catch","err","watch","handler","_editArr","mounted","article_insert","render","_vm","_h","$createElement","_c","_self","staticClass","_e","attrs","separator-class","staticStyle","float","_v","to","path","class","resetBg","lg","sm","xs","ref","model","label-position","label-width","prop","inline-message","width","placeholder","$$v","$set","expression","_l","index","key","_s","alias","on","active-text","inactive-text","action","show-file-list","accept","on-success","before-upload","src","font-size","icon","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/10.375650e40ffc2c2aef60.js","sourcesContent":["<template>\r\n  <div class=\"article_container\">\r\n    <el-breadcrumb class=\"path\" separator-class=\"el-icon-arrow-right\" v-if='!edit'>\r\n      <span style=\"float:left\">当前位置：</span>\r\n      <el-breadcrumb-item>文章管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item :to=\"{ path: '/article/insert' }\">添加文章</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <el-row>\r\n      <el-col :lg=\"17\" :md=\"17\" :sm=\"24\" :xs=\"24\" class=\"form-left\" :class=\"{resetBg: edit}\">\r\n        <el-form :rules=\"rules\" ref=\"dataForm1\" :model=\"Form\" label-position=\"left\" label-width=\"120px\">\r\n          <el-form-item label=\"文章标题：\" prop=\"title\" :inline-message=\"true\">\r\n              <el-input v-model=\"Form.title\" placeholder=\"文章标题\" style=\"width:50%\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"文章关键词：\" prop=\"keywords\" :inline-message=\"true\">\r\n              <el-input v-model=\"Form.keywords\" placeholder=\"文章关键词\" style=\"width:60%\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"文章描述：\" prop=\"des\" :inline-message=\"true\">\r\n              <el-input type=\"textarea\" v-model=\"Form.des\" placeholder=\"文章描述\" style=\"width:70%\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"文章分类：\" prop=\"category\" :inline-message=\"true\">\r\n            <div class=\"tag-box\">\r\n              <el-checkbox-group\r\n                v-model=\"Form.category\"\r\n                >\r\n                <el-checkbox v-for=\"(item, index) in category\" :label=\"item.value\" :key=\"index\">{{item.label}}</el-checkbox>\r\n              </el-checkbox-group>\r\n            </div>\r\n          </el-form-item>\r\n          <el-form-item label=\"文章标签：\" prop=\"tag\" :inline-message=\"true\">\r\n            <div class=\"tag-box\">\r\n              <el-checkbox-group\r\n                v-model=\"Form.tag\"\r\n                >\r\n                <el-checkbox v-for=\"(item, index) in tags\" :label=\"item.alias\" :key=\"index\">{{item.name}}</el-checkbox>\r\n              </el-checkbox-group>\r\n            </div>\r\n          </el-form-item>\r\n          <el-form-item label=\"文章内容：\" prop=\"content\" :inline-message=\"true\">\r\n            <div class=\"content-box\">\r\n              <mavon-editor v-model=\"Form.content\" @imgAdd=\"imgAdd\" @imgDel=\"imgDel\" ref=\"md\"/>\r\n            </div>\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-col>\r\n      <el-col :lg=\"5\" :md=\"5\" :sm=\"24\" :xs=\"24\" class=\"form-right\" :class=\"{resetBg: edit}\">\r\n        <el-form :rules=\"rules\" ref=\"dataForm2\" :model=\"Form\" label-position=\"top\" label-width=\"85px\">\r\n          <el-form-item label=\"文章来源：\" prop=\"origin\">\r\n              <el-select v-model=\"Form.origin\" placeholder=\"请选择\">\r\n                <el-option\r\n                  v-for=\"item in origin\"\r\n                  :key=\"item.value\"\r\n                  :label=\"item.label\"\r\n                  :value=\"item.value\">\r\n                </el-option>\r\n              </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"文章状态：\" prop=\"status\">\r\n            <el-switch\r\n              v-model=\"Form.status\"\r\n              active-text=\"直接发布\"\r\n              inactive-text=\"存为草稿\">\r\n            </el-switch>\r\n          </el-form-item>\r\n          <el-form-item label=\"是否公开：\" prop=\"open\">\r\n            <el-switch\r\n              v-model=\"Form.open\"\r\n              active-text=\"公开\"\r\n              inactive-text=\"私密\">\r\n            </el-switch>\r\n          </el-form-item>\r\n           <el-form-item label=\"缩略图：\" prop=\"thumb_img\" class=\"thumb_box\">\r\n              <el-upload\r\n                class=\"thumb-uploader\"\r\n                :action=\"baseapi + '/article/thumbSave'\"\r\n                :data=\"Form\"\r\n                :show-file-list=\"false\"\r\n                accept=\"image/*\"\r\n                :on-success=\"handleThumbSuccess\"\r\n                :before-upload=\"beforeThumbUpload\">\r\n                <div v-if=\"Form.imageUrl\" class=\"el-upload-list--picture-card\">\r\n                  <img :src=\"baseapi + Form.imageUrl\" class=\"thumb\">\r\n                  <label class=\"el-upload-list__item-status-label\">\r\n                    <i class=\"el-icon-upload-success el-icon-check\"></i>\r\n                  </label>\r\n                  <span class=\"el-upload-list__item-actions\">\r\n                    <span class=\"el-upload-list__item-preview\">\r\n                      <i class=\"el-icon-refresh\" style=\"font-size:14px\">重选</i>\r\n                    </span>\r\n                  </span>\r\n                </div>\r\n                <i v-else class=\"el-icon-plus thumb-uploader-icon\"></i>\r\n              </el-upload>\r\n           </el-form-item>\r\n        </el-form>\r\n         <el-button type=\"primary\" class=\"submit\" icon=\"el-icon-arrow-up\" @click=\"submit\" v-if=\"!edit\">发布文章</el-button>\r\n         <el-button type=\"primary\" class=\"submit\" icon=\"el-icon-check\" @click=\"editArticle\" v-else>保存修改</el-button>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport articleApi from '@/api/article'\r\nexport default {\r\n  props: {\r\n    edit: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    editArr: {\r\n      type: Object,\r\n      default: () => {}\r\n    },\r\n    editId: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  data () {\r\n    var validatetag = async (rule, value, callback) => {\r\n      if (value.length === 0) {\r\n        callback(new Error('至少选择一项标签'))\r\n      }\r\n    }\r\n    var validatecate = async (rule, value, callback) => {\r\n      if (value.length === 0) {\r\n        callback(new Error('至少选择一项分类'))\r\n      }\r\n    }\r\n    return {\r\n      baseapi: process.env.BASE_API,\r\n      category: [\r\n        {\r\n          label: '学无止境',\r\n          value: 'learn'\r\n        },\r\n        {\r\n          label: '个人归档',\r\n          value: 'note'\r\n        },\r\n        {\r\n          label: '慢生活',\r\n          value: 'life'\r\n        }\r\n      ],\r\n      tags: ['js', 'java', 'php'],\r\n      origin: [\r\n        {\r\n          label: '原创',\r\n          value: '0'\r\n        },\r\n        {\r\n          label: '转载',\r\n          value: '1'\r\n        },\r\n        {\r\n          label: '混合',\r\n          value: '2'\r\n        }\r\n\r\n      ],\r\n      Form: {\r\n        title: '',\r\n        keywords: '',\r\n        des: '',\r\n        category: [],\r\n        tag: [],\r\n        content: '',\r\n        origin: '0',\r\n        status: true,\r\n        open: true,\r\n        imageUrl: ''\r\n      },\r\n      rules: {\r\n        title: [{ required: true, message: '请输入文章标题', trigger: 'blur' }],\r\n        keywords: [{ required: true, message: '请输入文章关键词', trigger: 'blur' }],\r\n        des: [{ required: true, message: '请输入文章描述', trigger: 'blur' }],\r\n        category: [{ validator: validatecate, trigger: 'blur' }],\r\n        tag: [{ validator: validatetag, trigger: 'blur' }],\r\n        content: [{ required: true, message: '请输入文章内容', trigger: 'blur' }]\r\n      },\r\n      dialogImageUrl: '',\r\n      dialogVisible: false,\r\n      content_img_arr: []\r\n    }\r\n  },\r\n  methods: {\r\n    getTagList () {\r\n      articleApi.getTaglist().then((res) => {\r\n        if (res.data.code === 0) {\r\n          this.tags = res.data.tagList\r\n        }\r\n      })\r\n    },\r\n    refresh () {\r\n      // 页面刷新和关闭提醒事件\r\n      window.onbeforeunload = function () {\r\n        return '请确认信息是否已保存！'\r\n      }\r\n    },\r\n    imgAdd (pos, file) {\r\n      // console.log(file)\r\n      let formdata = new FormData()\r\n      formdata.append('image', file)\r\n      axios({\r\n        url: this.baseapi + '/article/contentimg',\r\n        method: 'post',\r\n        data: formdata,\r\n        headers: { 'Content-Type': 'multipart/form-data' }\r\n      }).then((res) => {\r\n        if (res.data.code === 0) {\r\n          let key = file.name\r\n          let obj = {}\r\n          obj[key] = res.data.imageUrl\r\n          this.content_img_arr.push(obj)\r\n          this.$refs.md.$img2Url(pos, this.baseapi + res.data.imageUrl)\r\n        }\r\n      })\r\n    },\r\n    imgDel (file) {\r\n      let delurl = ''\r\n      this.content_img_arr.map((item) => {\r\n        for (const k in item) {\r\n          if (file[0].name === k) {\r\n            // console.log(item[file[0].name])\r\n            delurl = item[file[0].name]\r\n          }\r\n        }\r\n      })\r\n\r\n      articleApi.delcontentimg(delurl).then((res) => {\r\n        if (res.data.code === 0) {\r\n          this.$notify({\r\n            type: 'success',\r\n            title: '成功',\r\n            message: res.data.message\r\n          })\r\n        }\r\n      })\r\n    },\r\n    handleThumbSuccess (res, file) {\r\n      if (res.code === 0) {\r\n        this.Form.imageUrl = res.imageUrl\r\n      }\r\n    },\r\n    beforeThumbUpload (file) {\r\n      const isLt10M = file.size / 1024 / 1024 < 10\r\n      if (!isLt10M) {\r\n        this.$message.error('上传头像图片大小不能超过 10MB!')\r\n      }\r\n      return isLt10M\r\n    },\r\n    editArticle () {\r\n      this.$refs.dataForm1.validate((valid) => {\r\n        if (valid) {\r\n          articleApi.editOneArticle(this.editId, this.Form).then((res) => {\r\n            if (res.data.code === 0) {\r\n              this.$emit('changeEditdialogVisible')\r\n              this.$notify({\r\n                type: 'success',\r\n                title: '成功',\r\n                message: '文章修改成功'\r\n              })\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n    submit () {\r\n      this.$refs.dataForm1.validate((valid) => {\r\n        if (valid) {\r\n          if (this.Form.imageUrl) {\r\n            articleApi.insert(JSON.stringify(this.Form)).then((res) => {\r\n              if (res.data.code === 0) {\r\n                this.$notify({\r\n                  type: 'success',\r\n                  title: '成功',\r\n                  message: '文章添加成功'\r\n                })\r\n                /* this.$refs.dataForm1.resetFields() // 重置表单\r\n                this.Form.imageUrl = '' */\r\n                this.$router.push('/article/index')\r\n              }\r\n            }).catch((err) => {\r\n              this.$notify({\r\n                type: 'error',\r\n                title: '失败',\r\n                message: err\r\n              })\r\n            })\r\n          } else {\r\n            this.$notify({\r\n              type: 'warning',\r\n              title: '警告',\r\n              message: '请选择要上传的缩略图'\r\n            })\r\n          }\r\n        }\r\n      })\r\n    }\r\n  },\r\n  watch: {\r\n    editArr: {\r\n      handler () {\r\n        let { title, keywords, des, category, tag, content, origin, status, open, imageUrl } = this.editArr\r\n        this.Form.title = title\r\n        this.Form.keywords = keywords\r\n        this.Form.des = des\r\n        this.Form.category = category\r\n        this.Form.tag = tag\r\n        this.Form.content = content\r\n        this.Form.origin = origin\r\n        this.Form.status = status\r\n        this.Form.open = open\r\n        this.Form.imageUrl = imageUrl\r\n      }\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getTagList()\r\n    this.refresh()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.article_container\r\n  .form-left\r\n    padding 10px 20px\r\n    box-sizing border-box\r\n    margin 0 15px\r\n    background-color #fff\r\n    &.resetBg\r\n      border 1px solid #ddd\r\n      border-radius 5px\r\n    .el-form-item\r\n      margin-bottom 10px\r\n    .tag-box\r\n      width 50%\r\n      padding 0 10px\r\n      min-height 60px\r\n      height 100%\r\n      border-radius 5px\r\n      border 1px solid #ddd\r\n      .el-checkbox\r\n        margin 0 15px\r\n    .content-box\r\n      width 98%\r\n    .v-note-wrapper\r\n      min-height 480px\r\n      max-height 650px\r\n  .form-right\r\n    padding 10px 20px\r\n    box-sizing border-box\r\n    margin 0 10px\r\n    background-color #fff\r\n    &.resetBg\r\n      border 1px solid #ddd\r\n      border-radius 5px\r\n    .thumb-uploader\r\n      .el-upload-list__item-status-label\r\n        display block\r\n        height 27px\r\n        top -10px\r\n        .el-icon-check\r\n          color #fff\r\n      .thumb-uploader-icon\r\n        font-size 28px\r\n        color #8c939d\r\n        width 100%\r\n        line-height 150px\r\n        text-align center\r\n      .thumb\r\n        width 210px\r\n        height 150px\r\n        display block\r\n    .submit\r\n      display block\r\n      width 80%\r\n      margin 30px auto 20px auto\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/article/insert.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"article_container\"},[(!_vm.edit)?_c('el-breadcrumb',{staticClass:\"path\",attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('span',{staticStyle:{\"float\":\"left\"}},[_vm._v(\"当前位置：\")]),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(\"文章管理\")]),_vm._v(\" \"),_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/article/insert' }}},[_vm._v(\"添加文章\")])],1):_vm._e(),_vm._v(\" \"),_c('el-row',[_c('el-col',{staticClass:\"form-left\",class:{resetBg: _vm.edit},attrs:{\"lg\":17,\"md\":17,\"sm\":24,\"xs\":24}},[_c('el-form',{ref:\"dataForm1\",attrs:{\"rules\":_vm.rules,\"model\":_vm.Form,\"label-position\":\"left\",\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"文章标题：\",\"prop\":\"title\",\"inline-message\":true}},[_c('el-input',{staticStyle:{\"width\":\"50%\"},attrs:{\"placeholder\":\"文章标题\"},model:{value:(_vm.Form.title),callback:function ($$v) {_vm.$set(_vm.Form, \"title\", $$v)},expression:\"Form.title\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"文章关键词：\",\"prop\":\"keywords\",\"inline-message\":true}},[_c('el-input',{staticStyle:{\"width\":\"60%\"},attrs:{\"placeholder\":\"文章关键词\"},model:{value:(_vm.Form.keywords),callback:function ($$v) {_vm.$set(_vm.Form, \"keywords\", $$v)},expression:\"Form.keywords\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"文章描述：\",\"prop\":\"des\",\"inline-message\":true}},[_c('el-input',{staticStyle:{\"width\":\"70%\"},attrs:{\"type\":\"textarea\",\"placeholder\":\"文章描述\"},model:{value:(_vm.Form.des),callback:function ($$v) {_vm.$set(_vm.Form, \"des\", $$v)},expression:\"Form.des\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"文章分类：\",\"prop\":\"category\",\"inline-message\":true}},[_c('div',{staticClass:\"tag-box\"},[_c('el-checkbox-group',{model:{value:(_vm.Form.category),callback:function ($$v) {_vm.$set(_vm.Form, \"category\", $$v)},expression:\"Form.category\"}},_vm._l((_vm.category),function(item,index){return _c('el-checkbox',{key:index,attrs:{\"label\":item.value}},[_vm._v(_vm._s(item.label))])}))],1)]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"文章标签：\",\"prop\":\"tag\",\"inline-message\":true}},[_c('div',{staticClass:\"tag-box\"},[_c('el-checkbox-group',{model:{value:(_vm.Form.tag),callback:function ($$v) {_vm.$set(_vm.Form, \"tag\", $$v)},expression:\"Form.tag\"}},_vm._l((_vm.tags),function(item,index){return _c('el-checkbox',{key:index,attrs:{\"label\":item.alias}},[_vm._v(_vm._s(item.name))])}))],1)]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"文章内容：\",\"prop\":\"content\",\"inline-message\":true}},[_c('div',{staticClass:\"content-box\"},[_c('mavon-editor',{ref:\"md\",on:{\"imgAdd\":_vm.imgAdd,\"imgDel\":_vm.imgDel},model:{value:(_vm.Form.content),callback:function ($$v) {_vm.$set(_vm.Form, \"content\", $$v)},expression:\"Form.content\"}})],1)])],1)],1),_vm._v(\" \"),_c('el-col',{staticClass:\"form-right\",class:{resetBg: _vm.edit},attrs:{\"lg\":5,\"md\":5,\"sm\":24,\"xs\":24}},[_c('el-form',{ref:\"dataForm2\",attrs:{\"rules\":_vm.rules,\"model\":_vm.Form,\"label-position\":\"top\",\"label-width\":\"85px\"}},[_c('el-form-item',{attrs:{\"label\":\"文章来源：\",\"prop\":\"origin\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.Form.origin),callback:function ($$v) {_vm.$set(_vm.Form, \"origin\", $$v)},expression:\"Form.origin\"}},_vm._l((_vm.origin),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"文章状态：\",\"prop\":\"status\"}},[_c('el-switch',{attrs:{\"active-text\":\"直接发布\",\"inactive-text\":\"存为草稿\"},model:{value:(_vm.Form.status),callback:function ($$v) {_vm.$set(_vm.Form, \"status\", $$v)},expression:\"Form.status\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"是否公开：\",\"prop\":\"open\"}},[_c('el-switch',{attrs:{\"active-text\":\"公开\",\"inactive-text\":\"私密\"},model:{value:(_vm.Form.open),callback:function ($$v) {_vm.$set(_vm.Form, \"open\", $$v)},expression:\"Form.open\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"thumb_box\",attrs:{\"label\":\"缩略图：\",\"prop\":\"thumb_img\"}},[_c('el-upload',{staticClass:\"thumb-uploader\",attrs:{\"action\":_vm.baseapi + '/article/thumbSave',\"data\":_vm.Form,\"show-file-list\":false,\"accept\":\"image/*\",\"on-success\":_vm.handleThumbSuccess,\"before-upload\":_vm.beforeThumbUpload}},[(_vm.Form.imageUrl)?_c('div',{staticClass:\"el-upload-list--picture-card\"},[_c('img',{staticClass:\"thumb\",attrs:{\"src\":_vm.baseapi + _vm.Form.imageUrl}}),_vm._v(\" \"),_c('label',{staticClass:\"el-upload-list__item-status-label\"},[_c('i',{staticClass:\"el-icon-upload-success el-icon-check\"})]),_vm._v(\" \"),_c('span',{staticClass:\"el-upload-list__item-actions\"},[_c('span',{staticClass:\"el-upload-list__item-preview\"},[_c('i',{staticClass:\"el-icon-refresh\",staticStyle:{\"font-size\":\"14px\"}},[_vm._v(\"重选\")])])])]):_c('i',{staticClass:\"el-icon-plus thumb-uploader-icon\"})])],1)],1),_vm._v(\" \"),(!_vm.edit)?_c('el-button',{staticClass:\"submit\",attrs:{\"type\":\"primary\",\"icon\":\"el-icon-arrow-up\"},on:{\"click\":_vm.submit}},[_vm._v(\"发布文章\")]):_c('el-button',{staticClass:\"submit\",attrs:{\"type\":\"primary\",\"icon\":\"el-icon-check\"},on:{\"click\":_vm.editArticle}},[_vm._v(\"保存修改\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-50deed58\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/article/insert.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-50deed58\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./insert.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./insert.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./insert.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-50deed58\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./insert.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-50deed58\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/article/insert.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}